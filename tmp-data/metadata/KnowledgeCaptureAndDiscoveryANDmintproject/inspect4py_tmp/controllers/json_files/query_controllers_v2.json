{"file": {"path": "/Users/dakixr/Desktop/github/scc/tmp-data/metadata/KnowledgeCaptureAndDiscoveryANDmintproject/data-catalog/api/dcat_service/controllers/query_controllers_v2.py", "fileNameBase": "query_controllers_v2", "extension": "py"}, "dependencies": [{"import": "sys", "type": "external"}, {"import": "traceback", "type": "external"}, {"from_module": "datetime", "import": "datetime", "type": "external"}, {"import": "uuid", "type": "external"}, {"import": "ujson", "type": "external"}, {"from_module": "dcat_service.misc.exception", "import": "BadRequestException", "type": "external"}, {"from_module": "dcat_service.misc.exception", "import": "InternalServerException", "type": "external"}, {"from_module": "dcat_service", "import": "session_scope", "type": "external"}, {"from_module": "dcat_service.db_models", "import": "DatasetDB", "type": "external"}, {"from_module": "sqlalchemy", "import": "func", "type": "external"}], "functions": {"search_datasets_v2": {"args": ["query_definition"], "returns": [["results_json"]], "min_max_lineno": {"min_lineno": 15, "max_lineno": 100}, "calls": ["int", "query_definition.keys", "frozenset", "query_definition.get", "query_definition.get", "query_definition.get", "query_definition.get", "len", "dcat_service.misc.exception.BadRequestException", "query_definition.pop", "dcat_service.misc.exception.BadRequestException", "all", "dcat_service.misc.exception.BadRequestException", "dcat_service.misc.exception.BadRequestException", "isinstance", "uuid.UUID", "dcat_service.session_scope", "query_controllers_v2._generate_select_datasets_query", "print", "session.execute", "datasets_dict.items", "traceback.print_exc", "dcat_service.misc.exception.InternalServerException", "str", "dcat_service.misc.exception.BadRequestException", "str", "results_json.append", "list", "str", "str", "ujson.loads", "query_definition.keys"], "store_vars_calls": {"limit": "int", "field_names": "query_definition.keys", "allowed_query_words": "frozenset", "search_query": "query_definition.get", "provenance_id": "query_definition.get", "spatial_coverage": "query_definition.get", "temporal_coverage": "query_definition.get", "datasets_query": "_generate_select_datasets_query", "datasets_results": "session.execute", "dataset_id": "str"}}, "_generate_select_datasets_query": {"args": ["provenance_id", "search_query", "spatial_coverage", "temporal_coverage", "limit"], "returns": [["query"]], "min_max_lineno": {"min_lineno": 102, "max_lineno": 151}, "calls": ["where_query_part.append", "where_query_part.append", "order_by_query_part.append", "order_by_query_part.append", "where_query_part.append", "temporal_coverage.get", "temporal_coverage.get", "len", "len", "where_query_part.append", "where_query_part.append", "ujson.dumps", "str"], "store_vars_calls": {"requested_coverage_start_time": "temporal_coverage.get", "requested_coverage_end_time": "temporal_coverage.get"}}}, "is_test": false}