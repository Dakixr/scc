{"file": {"path": "/Users/dakixr/Desktop/github/scc/tmp-data/metadata/KnowledgeCaptureAndDiscoveryANDmintproject/P4ML-UI/dsbox-ta2/python/dsbox/planner/controller.py", "fileNameBase": "controller", "extension": "py"}, "dependencies": [{"import": "os", "type": "external"}, {"import": "sys", "type": "external"}, {"import": "os", "type": "external"}, {"import": "uuid", "type": "external"}, {"import": "copy", "type": "external"}, {"import": "math", "type": "external"}, {"import": "json", "type": "external"}, {"import": "numpy", "type": "external"}, {"import": "shutil", "type": "external"}, {"import": "traceback", "type": "external"}, {"import": "pandas", "alias": "pd", "type": "external"}, {"from_module": "dsbox.planner.leveltwo.l1proxy", "import": "LevelOnePlannerProxy", "type": "external"}, {"from_module": "dsbox.planner.leveltwo.planner", "import": "LevelTwoPlanner", "type": "external"}, {"from_module": "dsbox.schema.data_profile", "import": "DataProfile", "type": "external"}, {"from_module": "dsbox.schema.problem_schema", "import": "TaskType", "type": "external"}, {"from_module": "dsbox.schema.problem_schema", "import": "TaskSubType", "type": "external"}, {"from_module": "dsbox.schema.problem_schema", "import": "Metric", "type": "external"}, {"from_module": "dsbox.executer.executionhelper", "import": "ExecutionHelper", "type": "external"}, {"from_module": "dsbox.planner.common.data_manager", "import": "Dataset", "type": "external"}, {"from_module": "dsbox.planner.common.data_manager", "import": "DataManager", "type": "external"}, {"from_module": "dsbox.planner.common.pipeline", "import": "Pipeline", "type": "external"}, {"from_module": "dsbox.planner.common.pipeline", "import": "PipelineExecutionResult", "type": "external"}, {"from_module": "dsbox.planner.common.problem_manager", "import": "Problem", "type": "external"}, {"from_module": "dsbox.planner.common.resource_manager", "import": "ResourceManager", "type": "external"}, {"from_module": "dsbox.planner.common.primitive", "import": "Primitive", "type": "external"}, {"from_module": "dsbox.planner.levelone.primitives", "import": "Primitives", "type": "external"}, {"from_module": "dsbox.planner.levelone.primitives", "import": "Category", "type": "external"}, {"from_module": "dsbox.planner.levelone.primitives", "import": "DSBoxPrimitives", "type": "external"}, {"from_module": "dsbox.planner.levelone.primitives", "import": "D3mPrimitives", "type": "external"}, {"from_module": "dsbox.planner.levelone.primitives", "import": "D3mPrimitive", "type": "external"}, {"from_module": "dsbox.planner.levelone.planner", "import": "LevelOnePlanner", "type": "external"}, {"from_module": "dsbox.planner.levelone.planner", "import": "get_d3m_primitives", "type": "external"}, {"from_module": "dsbox.planner.levelone.planner", "import": "AffinityPolicy", "type": "external"}], "classes": {"Feature": {"min_max_lineno": {"min_lineno": 26, "max_lineno": 30}, "methods": {"__init__": {"args": ["self", "resource_id", "feature_name"], "min_max_lineno": {"min_lineno": 27, "max_lineno": 30}}}}, "Controller": {"extend": ["object"], "min_max_lineno": {"min_lineno": 31, "max_lineno": 488}, "methods": {"__init__": {"args": ["self", "libdir"], "min_max_lineno": {"min_lineno": 60, "max_lineno": 63}, "calls": ["os.path.abspath", "os.path.abspath", "os.path.abspath", "os.path.abspath"], "store_vars_calls": {"self.libdir": "os.path.abspath"}}, "initialize_from_config": {"args": ["self", "config"], "min_max_lineno": {"min_lineno": 67, "max_lineno": 90}, "calls": ["controller.Controller._dir", "controller.Controller._dir", "controller.Controller._dir", "int", "config.get", "open", "open", "open", "dsbox.planner.common.problem_manager.Problem", "dsbox.planner.common.data_manager.DataManager", "dsbox.executer.executionhelper.ExecutionHelper", "dsbox.planner.common.resource_manager.ResourceManager", "config.get", "config.get"], "store_vars_calls": {"self.log_dir": "self._dir", "self.exec_dir": "self._dir", "self.tmp_dir": "self._dir", "self.num_cpus": "int", "self.ram": "config.get", "self.logfile": "open", "self.errorfile": "open", "self.pipelinesfile": "open", "self.problem": "Problem", "self.data_manager": "DataManager", "self.execution_helper": "ExecutionHelper", "self.resource_manager": "ResourceManager"}}, "initialize_from_restriction": {"args": ["self", "restriction"], "min_max_lineno": {"min_lineno": 92, "max_lineno": 126}, "calls": ["restriction.get", "restriction.get", "restriction.get", "restriction.get", "restriction.get", "restriction.get", "restriction.get", "restriction.get", "restriction.get", "restriction.get"], "store_vars_calls": {"self.model_name": "restriction.get", "self.feature_extraction": "restriction.get", "self.imputation": "restriction.get", "self.replace_model": "restriction.get", "self.exclude_model": "restriction.get"}}, "initialize_simple": {"args": ["self", "problemdir", "datadir", "outputdir"], "min_max_lineno": {"min_lineno": 132, "max_lineno": 144}, "calls": ["controller.Controller.initialize_from_config"]}, "load_problem": {"args": ["self"], "min_max_lineno": {"min_lineno": 152, "max_lineno": 157}, "calls": ["controller.Controller._dir", "controller.Controller.config.get", "controller.Controller.problem.load_problem"], "store_vars_calls": {"problemroot": "self._dir", "problemdoc": "self.config.get"}}, "initialize_training_data_from_config": {"args": ["self"], "min_max_lineno": {"min_lineno": 161, "max_lineno": 168}, "calls": ["controller.Controller._dir", "controller.Controller.config.get", "dsbox.planner.common.data_manager.Dataset", "dsbox.planner.common.data_manager.Dataset.load_dataset", "controller.Controller.data_manager.initialize_data"], "store_vars_calls": {"dataroot": "self._dir", "datadoc": "self.config.get", "dataset": "Dataset"}}, "initialize_from_features": {"args": ["self", "datafile", "train_features", "target_features", "outputdir", "view"], "min_max_lineno": {"min_lineno": 173, "max_lineno": 196}, "calls": ["os.path.dirname", "os.path.dirname", "os.path.dirname", "os.path.dirname", "controller.Controller.initialize_simple", "dsbox.planner.common.data_manager.Dataset", "dsbox.planner.common.data_manager.Dataset.load_dataset", "controller.Controller.data_manager.initialize_data", "list", "list", "map", "map"], "store_vars_calls": {"data_directory": "os.path.dirname", "dataset": "Dataset"}}, "initialize_planners": {"args": ["self"], "min_max_lineno": {"min_lineno": 201, "max_lineno": 204}, "calls": ["dsbox.planner.leveltwo.l1proxy.LevelOnePlannerProxy", "dsbox.planner.leveltwo.planner.LevelTwoPlanner"], "store_vars_calls": {"self.l1_planner": "LevelOnePlannerProxy", "self.l2_planner": "LevelTwoPlanner"}}, "train": {"args": ["self", "planner_event_handler", "cutoff"], "min_max_lineno": {"min_lineno": 208, "max_lineno": 360}, "calls": ["controller.Controller.logfile.write", "controller.Controller.logfile.write", "controller.Controller._show_status", "copy.copy", "copy.copy", "dsbox.schema.data_profile.DataProfile", "controller.Controller.logfile.write", "print", "controller.Controller.l1_planner.get_pipelines", "print", "controller.Controller.l1_planner.get_pipelines_by_feature_extration", "controller.Controller.exclude_model_function", "controller.Controller.replace_model.get", "controller.Controller.replace_model.get", "print", "print", "controller.Controller.same_step_with_replaced_model", "len", "controller.Controller.logfile.write", "controller.Controller.logfile.write", "controller.Controller.logfile.write", "controller.Controller._show_status", "controller.Controller.logfile.write", "controller.Controller.logfile.write", "controller.Controller._show_status", "sorted", "controller.Controller.logfile.write", "controller.Controller.logfile.write", "controller.Controller.write_training_results", "print", "controller.Controller.l1_planner.get_particular_pipelines_by_feature_extration", "controller.Controller.l1_planner.get_particular_pipelines", "l1_pipelines_handled.get", "controller.Controller.l2_planner.expand_pipeline", "controller.Controller.resource_manager.execute_pipelines_imputation", "controller.Controller.resource_manager.execute_pipelines", "range", "controller.Controller.logfile.write", "controller.Controller.logfile.write", "pe.ProblemNotImplemented", "pe.ProblemNotImplemented", "str", "len", "str", "str", "str", "len", "pe.RunningPipeline", "str", "str", "pe.CompletedPipeline", "controller.Controller.exec_pipelines.append", "str", "controller.Controller._sort_by_metric", "len", "l2_l1_map.get", "str", "l2_pipelines_handled.get", "l2_pipelines.append", "controller.Controller.l1_planner.get_related_pipelines", "str", "str", "pe.SubmittedPipeline", "l1_pipelines_handled.get", "l1_related_pipelines.append", "str"], "store_vars_calls": {"df": "copy.copy", "df_lbl": "copy.copy", "df_profile": "DataProfile", "l1_pipelines": "self.l1_planner.get_particular_pipelines", "replaced_model": "self.replace_model.get", "new_model": "self.replace_model.get", "self.exec_pipelines": "sorted", "l2_pipeline_list": "self.l2_planner.expand_pipeline", "exec_pipelines": "self.resource_manager.execute_pipelines", "l1_pipeline": "l2_l1_map.get", "related_pipelines": "self.l1_planner.get_related_pipelines"}}, "same_step_with_replaced_model": {"args": ["self", "pipeline", "replaced_model", "new_model"], "min_max_lineno": {"min_lineno": 363, "max_lineno": 380}, "calls": ["pipeline.append", "elem.getPrimitiveAt", "dsbox.planner.levelone.primitives.Primitives", "dsbox.planner.common.primitive.Primitive", "replaced_pipeline.replacePrimitiveAt", "pipeline.remove"], "store_vars_calls": {"primitive": "elem.getPrimitiveAt", "cls": "Primitives", "new_primitive": "Primitive"}}, "exclude_model_function": {"args": ["self", "pipeline", "exclude_model"], "returns": [["pipeline"]], "min_max_lineno": {"min_lineno": 381, "max_lineno": 390}, "calls": ["elem.getPrimitiveAt", "pipeline.remove"], "store_vars_calls": {"primitive": "elem.getPrimitiveAt"}}, "write_training_results": {"args": ["self"], "min_max_lineno": {"min_lineno": 395, "max_lineno": 416}, "calls": ["sorted", "controller.Controller._show_status", "controller.Controller.pipelinesfile.write", "range", "len", "pipeline.planner_result.metric_values.keys", "controller.Controller.pipelinesfile.write", "controller.Controller.execution_helper.create_pipeline_executable", "controller.Controller.create_pipeline_logfile", "len", "metric_values.append", "controller.Controller._sort_by_metric"], "store_vars_calls": {"self.exec_pipelines": "sorted"}}, "test": {"args": ["self", "pipeline", "test_event_handler"], "min_max_lineno": {"min_lineno": 420, "max_lineno": 447}, "calls": ["dsbox.executer.executionhelper.ExecutionHelper", "pandas.DataFrame", "print", "sys.stdout.flush", "copy.copy", "test_event_handler.ExecutedPipeline", "str", "print", "sys.stdout.flush", "pandas.DataFrame", "dsbox.planner.common.pipeline.PipelineExecutionResult", "sys.stderr.write", "traceback.print_exc", "primitive.executables.predict", "dsbox.executer.executionhelper.ExecutionHelper.test_execute_primitive", "dsbox.executer.executionhelper.ExecutionHelper.test_featurise"], "store_vars_calls": {"helper": "ExecutionHelper", "testdf": "helper.test_featurise", "result": "pd.DataFrame", "pipeline.test_result": "PipelineExecutionResult"}}, "stop": {"doc": {"short_description": "Stop planning, and write out the current list (sorted by metric)"}, "args": ["self"], "min_max_lineno": {"min_lineno": 448, "max_lineno": 450}}, "create_pipeline_logfile": {"args": ["self", "pipeline", "rank"], "min_max_lineno": {"min_lineno": 453, "max_lineno": 467}, "calls": ["logdata[].append", "open", "json.dump", "pipelog.close"]}, "_dir": {"args": ["self", "config", "key", "makeflag"], "returns": [["dir"]], "min_max_lineno": {"min_lineno": 468, "max_lineno": 476}, "calls": ["config.get", "os.path.abspath", "os.path.abspath", "os.path.abspath", "os.path.abspath", "os.makedirs", "os.makedirs", "os.makedirs", "os.makedirs", "os.path.exists", "os.path.exists", "os.path.exists", "os.path.exists"], "store_vars_calls": {"dir": "os.path.abspath"}}, "_show_status": {"args": ["self", "status"], "min_max_lineno": {"min_lineno": 477, "max_lineno": 480}, "calls": ["print", "sys.stdout.flush"]}, "_sort_by_metric": {"args": ["self", "pipeline"], "min_max_lineno": {"min_lineno": 481, "max_lineno": 488}, "calls": ["metric_name.lower"], "store_vars_calls": {"mlower": "metric_name.lower"}}}}}, "is_test": false}