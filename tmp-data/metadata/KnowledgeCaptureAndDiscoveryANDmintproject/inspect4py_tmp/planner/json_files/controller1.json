{"file": {"path": "/Users/dakixr/Desktop/github/scc/tmp-data/metadata/KnowledgeCaptureAndDiscoveryANDmintproject/P4ML-UI/dsbox-ta2/python/dsbox/planner/controller1.py", "fileNameBase": "controller1", "extension": "py"}, "dependencies": [{"import": "os", "type": "external"}, {"import": "sys", "type": "external"}, {"import": "os", "type": "external"}, {"import": "uuid", "type": "external"}, {"import": "copy", "type": "external"}, {"import": "math", "type": "external"}, {"import": "json", "type": "external"}, {"import": "numpy", "type": "external"}, {"import": "shutil", "type": "external"}, {"import": "traceback", "type": "external"}, {"import": "pandas", "alias": "pd", "type": "external"}, {"from_module": "dsbox.planner.leveltwo.l1proxy", "import": "LevelOnePlannerProxy", "type": "external"}, {"from_module": "dsbox.planner.leveltwo.planner", "import": "LevelTwoPlanner", "type": "external"}, {"from_module": "dsbox.schema.data_profile", "import": "DataProfile", "type": "external"}, {"from_module": "dsbox.schema.problem_schema", "import": "TaskType", "type": "external"}, {"from_module": "dsbox.schema.problem_schema", "import": "TaskSubType", "type": "external"}, {"from_module": "dsbox.schema.problem_schema", "import": "Metric", "type": "external"}, {"from_module": "dsbox.executer.executionhelper", "import": "ExecutionHelper", "type": "external"}, {"from_module": "dsbox.planner.common.data_manager", "import": "Dataset", "type": "external"}, {"from_module": "dsbox.planner.common.data_manager", "import": "DataManager", "type": "external"}, {"from_module": "dsbox.planner.common.pipeline", "import": "Pipeline", "type": "external"}, {"from_module": "dsbox.planner.common.pipeline", "import": "PipelineExecutionResult", "type": "external"}, {"from_module": "dsbox.planner.common.problem_manager", "import": "Problem", "type": "external"}, {"from_module": "dsbox.planner.common.resource_manager", "import": "ResourceManager", "type": "external"}, {"from_module": "dsbox.planner.common.primitive", "import": "Primitive", "type": "external"}, {"from_module": "dsbox.planner.levelone.primitives", "import": "Primitives", "type": "external"}, {"from_module": "dsbox.planner.levelone.primitives", "import": "Category", "type": "external"}, {"from_module": "dsbox.planner.levelone.primitives", "import": "DSBoxPrimitives", "type": "external"}, {"from_module": "dsbox.planner.levelone.primitives", "import": "D3mPrimitives", "type": "external"}, {"from_module": "dsbox.planner.levelone.primitives", "import": "D3mPrimitive", "type": "external"}, {"from_module": "dsbox.planner.levelone.planner", "import": "LevelOnePlanner", "type": "external"}, {"from_module": "dsbox.planner.levelone.planner", "import": "get_d3m_primitives", "type": "external"}, {"from_module": "dsbox.planner.levelone.planner", "import": "AffinityPolicy", "type": "external"}], "classes": {"Feature": {"min_max_lineno": {"min_lineno": 26, "max_lineno": 30}, "methods": {"__init__": {"args": ["self", "resource_id", "feature_name"], "min_max_lineno": {"min_lineno": 27, "max_lineno": 30}}}}, "Controller": {"extend": ["object"], "min_max_lineno": {"min_lineno": 31, "max_lineno": 514}, "methods": {"__init__": {"args": ["self", "libdir"], "min_max_lineno": {"min_lineno": 56, "max_lineno": 63}, "calls": ["os.path.abspath", "os.path.abspath", "os.path.abspath", "os.path.abspath"], "store_vars_calls": {"self.libdir": "os.path.abspath"}}, "initialize_from_config": {"args": ["self", "config"], "min_max_lineno": {"min_lineno": 66, "max_lineno": 89}, "calls": ["controller1.Controller._dir", "controller1.Controller._dir", "controller1.Controller._dir", "int", "config.get", "open", "open", "open", "dsbox.planner.common.problem_manager.Problem", "dsbox.planner.common.data_manager.DataManager", "dsbox.executer.executionhelper.ExecutionHelper", "dsbox.planner.common.resource_manager.ResourceManager", "config.get", "config.get"], "store_vars_calls": {"self.log_dir": "self._dir", "self.exec_dir": "self._dir", "self.tmp_dir": "self._dir", "self.num_cpus": "int", "self.ram": "config.get", "self.logfile": "open", "self.errorfile": "open", "self.pipelinesfile": "open", "self.problem": "Problem", "self.data_manager": "DataManager", "self.execution_helper": "ExecutionHelper", "self.resource_manager": "ResourceManager"}}, "initialize_from_restriction": {"args": ["self", "restriction"], "min_max_lineno": {"min_lineno": 91, "max_lineno": 113}, "calls": ["restriction.get", "restriction.get", "restriction.get", "restriction.get", "restriction.get", "restriction.get", "restriction.get", "restriction.get"], "store_vars_calls": {"self.model_name": "restriction.get", "self.feature_extraction": "restriction.get", "self.imputation": "restriction.get", "self.replaced_model": "restriction.get"}}, "initialize_simple": {"args": ["self", "problemdir", "datadir", "outputdir"], "min_max_lineno": {"min_lineno": 119, "max_lineno": 131}, "calls": ["controller1.Controller.initialize_from_config"]}, "load_problem": {"args": ["self"], "min_max_lineno": {"min_lineno": 139, "max_lineno": 144}, "calls": ["controller1.Controller._dir", "controller1.Controller.config.get", "controller1.Controller.problem.load_problem"], "store_vars_calls": {"problemroot": "self._dir", "problemdoc": "self.config.get"}}, "initialize_training_data_from_config": {"args": ["self"], "min_max_lineno": {"min_lineno": 148, "max_lineno": 155}, "calls": ["controller1.Controller._dir", "controller1.Controller.config.get", "dsbox.planner.common.data_manager.Dataset", "dsbox.planner.common.data_manager.Dataset.load_dataset", "controller1.Controller.data_manager.initialize_data"], "store_vars_calls": {"dataroot": "self._dir", "datadoc": "self.config.get", "dataset": "Dataset"}}, "initialize_from_features": {"args": ["self", "datafile", "train_features", "target_features", "outputdir", "view"], "min_max_lineno": {"min_lineno": 160, "max_lineno": 183}, "calls": ["os.path.dirname", "os.path.dirname", "os.path.dirname", "os.path.dirname", "controller1.Controller.initialize_simple", "dsbox.planner.common.data_manager.Dataset", "dsbox.planner.common.data_manager.Dataset.load_dataset", "controller1.Controller.data_manager.initialize_data", "list", "list", "map", "map"], "store_vars_calls": {"data_directory": "os.path.dirname", "dataset": "Dataset"}}, "initialize_planners": {"args": ["self"], "min_max_lineno": {"min_lineno": 188, "max_lineno": 191}, "calls": ["dsbox.planner.leveltwo.l1proxy.LevelOnePlannerProxy", "dsbox.planner.leveltwo.planner.LevelTwoPlanner"], "store_vars_calls": {"self.l1_planner": "LevelOnePlannerProxy", "self.l2_planner": "LevelTwoPlanner"}}, "train": {"args": ["self", "planner_event_handler", "cutoff"], "min_max_lineno": {"min_lineno": 195, "max_lineno": 330}, "calls": ["controller1.Controller.logfile.write", "controller1.Controller.logfile.write", "controller1.Controller._show_status", "copy.copy", "copy.copy", "dsbox.schema.data_profile.DataProfile", "controller1.Controller.logfile.write", "print", "controller1.Controller.l1_planner.get_pipelines", "len", "controller1.Controller.logfile.write", "controller1.Controller.logfile.write", "controller1.Controller.logfile.write", "controller1.Controller._show_status", "controller1.Controller.logfile.write", "controller1.Controller.logfile.write", "controller1.Controller._show_status", "controller1.Controller.resource_manager.execute_pipelines", "sorted", "controller1.Controller.logfile.write", "controller1.Controller.logfile.write", "controller1.Controller.write_training_results", "controller1.Controller.l1_planner.get_particular_pipelines_by_feature_extration", "controller1.Controller.l1_planner.get_particular_pipelines", "l1_pipelines_handled.get", "controller1.Controller.l2_planner.expand_pipeline", "range", "controller1.Controller.logfile.write", "controller1.Controller.logfile.write", "pe.ProblemNotImplemented", "pe.ProblemNotImplemented", "str", "len", "str", "str", "str", "len", "pe.RunningPipeline", "str", "str", "pe.CompletedPipeline", "controller1.Controller.exec_pipelines.append", "str", "controller1.Controller._sort_by_metric", "len", "l2_l1_map.get", "str", "l2_pipelines_handled.get", "l2_pipelines.append", "controller1.Controller.l1_planner.get_related_pipelines", "str", "str", "pe.SubmittedPipeline", "l1_pipelines_handled.get", "l1_related_pipelines.append", "str"], "store_vars_calls": {"df": "copy.copy", "df_lbl": "copy.copy", "df_profile": "DataProfile", "l1_pipelines": "self.l1_planner.get_particular_pipelines", "exec_pipelines": "self.resource_manager.execute_pipelines", "self.exec_pipelines": "sorted", "l2_pipeline_list": "self.l2_planner.expand_pipeline", "l1_pipeline": "l2_l1_map.get", "related_pipelines": "self.l1_planner.get_related_pipelines"}}, "same_step_with_replaced_model": {"args": ["pipeline", "replaced_model"], "returns": [["new_pipelines"]], "min_max_lineno": {"min_lineno": 403, "max_lineno": 414}, "calls": ["pipeline.clone", "dsbox.planner.levelone.primitives.D3mPrimitive", "print", "elem.replacePrimitiveAt", "new_pipelines.append"], "store_vars_calls": {"pipeline_copy": "pipeline.clone", "replaced": "D3mPrimitive", "copy": "elem.replacePrimitiveAt"}}, "write_training_results": {"args": ["self"], "min_max_lineno": {"min_lineno": 420, "max_lineno": 442}, "calls": ["sorted", "controller1.Controller._show_status", "controller1.Controller.pipelinesfile.write", "range", "len", "pipeline.planner_result.metric_values.keys", "controller1.Controller.pipelinesfile.write", "controller1.Controller.execution_helper.create_pipeline_executable", "controller1.Controller.create_pipeline_logfile", "len", "metric_values.append", "controller1.Controller._sort_by_metric"], "store_vars_calls": {"self.exec_pipelines": "sorted"}}, "test": {"args": ["self", "pipeline", "test_event_handler"], "min_max_lineno": {"min_lineno": 446, "max_lineno": 473}, "calls": ["dsbox.executer.executionhelper.ExecutionHelper", "pandas.DataFrame", "print", "sys.stdout.flush", "copy.copy", "test_event_handler.ExecutedPipeline", "str", "print", "sys.stdout.flush", "pandas.DataFrame", "dsbox.planner.common.pipeline.PipelineExecutionResult", "sys.stderr.write", "traceback.print_exc", "primitive.executables.predict", "dsbox.executer.executionhelper.ExecutionHelper.test_execute_primitive", "dsbox.executer.executionhelper.ExecutionHelper.test_featurise"], "store_vars_calls": {"helper": "ExecutionHelper", "testdf": "helper.test_featurise", "result": "pd.DataFrame", "pipeline.test_result": "PipelineExecutionResult"}}, "stop": {"doc": {"short_description": "Stop planning, and write out the current list (sorted by metric)"}, "args": ["self"], "min_max_lineno": {"min_lineno": 474, "max_lineno": 476}}, "create_pipeline_logfile": {"args": ["self", "pipeline", "rank"], "min_max_lineno": {"min_lineno": 479, "max_lineno": 493}, "calls": ["logdata[].append", "open", "json.dump", "pipelog.close"]}, "_dir": {"args": ["self", "config", "key", "makeflag"], "returns": [["dir"]], "min_max_lineno": {"min_lineno": 494, "max_lineno": 502}, "calls": ["config.get", "os.path.abspath", "os.path.abspath", "os.path.abspath", "os.path.abspath", "os.makedirs", "os.makedirs", "os.makedirs", "os.makedirs", "os.path.exists", "os.path.exists", "os.path.exists", "os.path.exists"], "store_vars_calls": {"dir": "os.path.abspath"}}, "_show_status": {"args": ["self", "status"], "min_max_lineno": {"min_lineno": 503, "max_lineno": 506}, "calls": ["print", "sys.stdout.flush"]}, "_sort_by_metric": {"args": ["self", "pipeline"], "min_max_lineno": {"min_lineno": 507, "max_lineno": 514}, "calls": ["metric_name.lower"], "store_vars_calls": {"mlower": "metric_name.lower"}}}}}, "is_test": false}