{"file": {"path": "/Users/dakixr/Desktop/github/scc/tmp-data/metadata/KnowledgeCaptureAndDiscoveryANDmintproject/byod-cleaning-api/kbclean/transformation/dsl_learner.py", "fileNameBase": "dsl_learner", "extension": "py"}, "dependencies": [{"import": "itertools", "type": "external"}, {"import": "string", "type": "external"}, {"from_module": "collections", "import": "defaultdict", "type": "external"}, {"from_module": "typing", "import": "List", "type": "external"}, {"from_module": "typing", "import": "Tuple", "type": "external"}, {"from_module": "loguru", "import": "logger", "type": "external"}, {"import": "regex", "alias": "re", "type": "external"}, {"from_module": "functools", "import": "reduce", "type": "external"}], "classes": {"Token": {"min_max_lineno": {"min_lineno": 21, "max_lineno": 24}, "methods": {"__init__": {"args": ["self", "token_type"], "min_max_lineno": {"min_lineno": 22, "max_lineno": 24}}}}, "DAG": {"min_max_lineno": {"min_lineno": 26, "max_lineno": 59}, "methods": {"__init__": {"args": ["self", "interval2transform", "length"], "min_max_lineno": {"min_lineno": 27, "max_lineno": 30}}, "__call__": {"args": ["self", "raw_str"], "min_max_lineno": {"min_lineno": 31, "max_lineno": 59}, "calls": ["dsl_learner.DAG.interval2transform.keys", "range", "dsl_learner.DAG.interval2transform[].keys", "range", "list", "range", "list", "range", "result[].extend", "set", "range", "set", "x", "itertools.product", "x"]}}}, "ConstStr": {"min_max_lineno": {"min_lineno": 61, "max_lineno": 70}, "methods": {"__init__": {"args": ["self", "value"], "min_max_lineno": {"min_lineno": 62, "max_lineno": 64}}, "__call__": {"args": ["self", "raw_str"], "min_max_lineno": {"min_lineno": 65, "max_lineno": 67}}, "__repr__": {"args": ["self"], "min_max_lineno": {"min_lineno": 68, "max_lineno": 70}}}}, "Substr": {"min_max_lineno": {"min_lineno": 72, "max_lineno": 84}, "methods": {"__init__": {"args": ["self", "start_pos", "end_pos"], "min_max_lineno": {"min_lineno": 73, "max_lineno": 76}}, "__call__": {"args": ["self", "raw_str"], "min_max_lineno": {"min_lineno": 77, "max_lineno": 81}, "calls": ["dsl_learner.Substr.start_pos", "dsl_learner.Substr.end_pos"], "store_vars_calls": {"pos1": "self.start_pos", "pos2": "self.end_pos"}}, "__repr__": {"args": ["self"], "min_max_lineno": {"min_lineno": 82, "max_lineno": 84}}}}, "CPos": {"min_max_lineno": {"min_lineno": 86, "max_lineno": 95}, "methods": {"__init__": {"args": ["self", "pos"], "min_max_lineno": {"min_lineno": 87, "max_lineno": 89}}, "__call__": {"args": ["self", "raw_str"], "min_max_lineno": {"min_lineno": 90, "max_lineno": 92}}, "__repr__": {"args": ["self"], "min_max_lineno": {"min_lineno": 93, "max_lineno": 95}}}}, "RPos": {"min_max_lineno": {"min_lineno": 97, "max_lineno": 115}, "methods": {"__init__": {"args": ["self", "regex", "count"], "min_max_lineno": {"min_lineno": 98, "max_lineno": 101}}, "__call__": {"args": ["self", "raw_str"], "min_max_lineno": {"min_lineno": 102, "max_lineno": 112}, "calls": ["list", "match.start", "regex.finditer", "len", "len"], "store_vars_calls": {"matches": "list"}}, "__repr__": {"args": ["self"], "min_max_lineno": {"min_lineno": 113, "max_lineno": 115}}}}, "DSLLearner": {"min_max_lineno": {"min_lineno": 117, "max_lineno": 178}, "methods": {"__init__": {"args": ["self"], "min_max_lineno": {"min_lineno": 118, "max_lineno": 120}}, "fit": {"args": ["self", "str_pairs"], "min_max_lineno": {"min_lineno": 121, "max_lineno": 123}, "calls": ["dsl_learner.DSLLearner.generate_str"]}, "get_iparts": {"args": ["self", "input_str"], "min_max_lineno": {"min_lineno": 124, "max_lineno": 141}, "calls": ["collections.defaultdict", "token2regex.items", "list", "range", "regex.findall", "collections.defaultdict.keys", "len", "range", "len", "remove_list.append"], "store_vars_calls": {"token2matches": "defaultdict", "iparts": "list"}}, "generate_str": {"args": ["self", "input_str", "output_str"], "min_max_lineno": {"min_lineno": 142, "max_lineno": 152}, "calls": ["collections.defaultdict", "range", "dsl_learner.DAG", "len", "range", "len", "collections.defaultdict", "dsl_learner.DSLLearner.generate_substr", "len", "[].extend", "[].append", "dsl_learner.ConstStr"], "store_vars_calls": {"interval2transform": "defaultdict", "substr_ops": "self.generate_substr"}}, "generate_substr": {"args": ["self", "input_str", "output_str"], "returns": [["result"]], "min_max_lineno": {"min_lineno": 153, "max_lineno": 161}, "calls": ["dsl_learner.DSLLearner.get_iparts", "regex.finditer", "dsl_learner.DSLLearner.generate_pos", "match.start", "dsl_learner.DSLLearner.generate_pos", "match.end", "result.append", "dsl_learner.Substr"], "store_vars_calls": {"iparts": "self.get_iparts"}}, "generate_pos": {"args": ["self", "input_str", "k", "iparts"], "returns": [["result"]], "min_max_lineno": {"min_lineno": 162, "max_lineno": 178}, "calls": ["dsl_learner.CPos", "dsl_learner.CPos", "regex.match", "regex.finditer", "result.append", "result.append", "len", "match.start", "dsl_learner.RPos", "dsl_learner.RPos"], "store_vars_calls": {"matches": "re.finditer"}}}}, "DSLGenerator": {"min_max_lineno": {"min_lineno": 180, "max_lineno": 244}, "methods": {"__init__": {"args": ["self"], "min_max_lineno": {"min_lineno": 181, "max_lineno": 183}, "calls": ["dsl_learner.DSLLearner"], "store_vars_calls": {"self.trans_learner": "DSLLearner"}}, "_check_exceptions": {"args": ["self", "str1", "exceptions"], "returns": [["exception"]], "min_max_lineno": {"min_lineno": 185, "max_lineno": 190}}, "_get_exceptions": {"args": ["self", "dags"], "returns": [["exceptions"]], "min_max_lineno": {"min_lineno": 191, "max_lineno": 201}, "calls": ["dag.interval2transform.keys", "dag.interval2transform[].values", "isinstance", "exceptions.append"]}, "_generate_transformed_data": {"args": ["self", "dags", "values", "exceptions"], "min_max_lineno": {"min_lineno": 203, "max_lineno": 213}, "calls": ["functools.reduce", "result_lists.append", "list", "set", "itertools.chain.from_iterable", "dsl_learner.DSLGenerator._check_exceptions", "dag"], "store_vars_calls": {"intersection": "reduce"}}, "fit_transform": {"args": ["self", "ec_pairs", "values"], "returns": [["data", "labels"]], "min_max_lineno": {"min_lineno": 214, "max_lineno": 244}, "calls": ["dsl_learner.DSLGenerator.trans_learner.fit", "dsl_learner.DSLGenerator._get_exceptions", "dsl_learner.DSLGenerator._generate_transformed_data", "loguru.logger.debug", "loguru.logger.debug", "loguru.logger.debug", "str", "list", "str", "str", "set", "dsl_learner.DSLGenerator._check_exceptions", "list", "list", "len", "set", "len", "set", "range", "range", "len", "len"], "store_vars_calls": {"dags": "self.trans_learner.fit", "exceptions": "self._get_exceptions", "neg_values": "self._generate_transformed_data"}}}}}, "body": {"calls": ["token2regex.update"]}, "is_test": false}