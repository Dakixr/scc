{"file": {"path": "/Users/dakixr/Desktop/github/scc/tmp-data/metadata/KnowledgeCaptureAndDiscoveryANDmintproject/MINT-Data-Sync/sync_gldas.py", "fileNameBase": "sync_gldas", "extension": "py"}, "dependencies": [{"from_module": "bs4", "import": "BeautifulSoup", "type": "external"}, {"import": "requests", "type": "external"}, {"from_module": "requests.auth", "import": "HTTPBasicAuth", "type": "external"}, {"from_module": "requests", "import": "Request", "type": "external"}, {"from_module": "requests", "import": "Session", "type": "external"}, {"import": "os", "type": "external"}, {"import": "datetime", "type": "external"}, {"import": "pprint", "type": "external"}, {"import": "uuid", "type": "external"}], "functions": {"prepare_env": {"min_max_lineno": {"min_lineno": 19, "max_lineno": 51}, "calls": ["open().write", "Exception", "Exception", "Exception", "Exception", "open"]}, "handle_api_response": {"args": ["response", "print_response"], "returns": [["parsed_response"]], "min_max_lineno": {"min_lineno": 54, "max_lineno": 71}, "calls": ["pprint.PrettyPrinter", "response.json", "pprint.PrettyPrinter.pprint", "Exception", "Exception", "Exception"], "store_vars_calls": {"pp": "pprint.PrettyPrinter", "parsed_response": "response.json"}}, "metadata_from_gldas_filename": {"args": ["filename"], "min_max_lineno": {"min_lineno": 73, "max_lineno": 97}, "calls": ["filename.split", "datetime.datetime.strptime", "datetime.datetime.strptime", "datetime.datetime.strptime.replace", "datetime.datetime.strptime.strftime", "datetime.datetime.strptime.strftime", "datetime.timedelta", "date.replace.isoformat().split", "temporal_coverage_end.isoformat().split", "date.replace.isoformat", "temporal_coverage_end.isoformat"], "store_vars_calls": {"parts": "filename.split", "date": "datetime.datetime.strptime", "hhmm": "datetime.datetime.strptime", "temporal_coverage_start": "date.replace", "year": "date.strftime", "day_of_year": "date.strftime"}}, "generate_list_of_dates_between": {"args": ["start_date", "end_date"], "returns": [["dates"]], "min_max_lineno": {"min_lineno": 100, "max_lineno": 108}, "calls": ["range", "dates.append", "datetime.timedelta"]}, "fetch_page": {"args": ["url"], "min_max_lineno": {"min_lineno": 117, "max_lineno": 121}, "calls": ["requests.get"], "store_vars_calls": {"resp": "requests.get"}}, "extract_last_available_year": {"args": ["html_doc"], "min_max_lineno": {"min_lineno": 123, "max_lineno": 138}, "calls": ["bs4.BeautifulSoup", "set", "bs4.BeautifulSoup.find_all", "list", "list.sort", "link.get", "href[].isdigit", "list.add", "len"], "store_vars_calls": {"soup": "BeautifulSoup", "years": "list", "href": "link.get"}}, "extract_last_available_day_of_year": {"args": ["html_doc"], "min_max_lineno": {"min_lineno": 140, "max_lineno": 155}, "calls": ["bs4.BeautifulSoup", "set", "bs4.BeautifulSoup.find_all", "list", "list.sort", "link.get", "href[].isdigit", "list.add", "len"], "store_vars_calls": {"soup": "BeautifulSoup", "days_of_year": "list", "href": "link.get"}}, "get_last_available_date": {"args": ["last_available_year_str", "last_available_day_of_year_str"], "returns": [["d"]], "min_max_lineno": {"min_lineno": 158, "max_lineno": 165}, "calls": ["int", "int", "datetime.datetime.strptime"], "store_vars_calls": {"year": "int", "day_of_year": "int", "d": "datetime.datetime.strptime"}}, "list_gldas_files": {"args": ["gldas_url"], "returns": [["filenames"]], "min_max_lineno": {"min_lineno": 167, "max_lineno": 180}, "calls": ["sync_gldas.fetch_page", "bs4.BeautifulSoup", "set", "bs4.BeautifulSoup.find_all", "list", "list.sort", "link.get", "list.add", "len"], "store_vars_calls": {"html_doc": "fetch_page", "soup": "BeautifulSoup", "filenames": "list", "href": "link.get"}}, "last_available_gldas_date": {"returns": [["last_date"]], "min_max_lineno": {"min_lineno": 182, "max_lineno": 200}, "calls": ["sync_gldas.fetch_page", "sync_gldas.extract_last_available_year", "sync_gldas.fetch_page", "sync_gldas.extract_last_available_day_of_year", "sync_gldas.get_last_available_date"], "store_vars_calls": {"list_of_years_html_doc": "fetch_page", "last_year": "extract_last_available_year", "list_of_day_of_year_html_doc": "fetch_page", "last_day_of_year": "extract_last_available_day_of_year", "last_date": "get_last_available_date"}}, "download_gldas_file": {"args": ["url_prefix", "filename"], "min_max_lineno": {"min_lineno": 203, "max_lineno": 214}, "calls": ["requests.get", "open().write", "os.path.abspath", "open", "os.stat"], "store_vars_calls": {"resp": "requests.get"}}, "does_object_exist": {"args": ["rel_path"], "min_max_lineno": {"min_lineno": 228, "max_lineno": 259}, "calls": ["os.path.join", "requests.Request", "requests.Request.prepare", "s.send", "Exception"], "store_vars_calls": {"path": "os.path.join", "req": "Request", "prepped": "req.prepare", "resp": "s.send"}}, "create_folder_recursive": {"args": ["path"], "min_max_lineno": {"min_lineno": 260, "max_lineno": 290}, "calls": ["requests.Request", "requests.Request.prepare", "s.send", "print", "sync_gldas.create_folder_recursive", "sync_gldas.create_folder_recursive", "Exception", "print", "print", "path.split", "path.split"], "store_vars_calls": {"req": "Request", "prepped": "req.prepare", "resp": "s.send", "success": "create_folder_recursive"}}, "list_files": {"args": ["root"], "returns": [["result"]], "min_max_lineno": {"min_lineno": 292, "max_lineno": 311}, "calls": ["os.walk", "path.replace", "os.path.join", "result.append", "len"], "store_vars_calls": {"rel_dir": "path.replace", "filepath": "os.path.join"}}, "upload_file": {"args": ["source", "filename"], "returns": [["upload_target"], ["upload_target"]], "min_max_lineno": {"min_lineno": 312, "max_lineno": 349}, "calls": ["open().read", "sync_gldas.metadata_from_gldas_filename", "os.path.join", "sync_gldas.does_object_exist", "print", "os.path.join", "print", "sync_gldas.create_folder_recursive", "sync_gldas.does_object_exist", "print", "requests.Request", "requests.Request.prepare", "datetime.datetime.now", "s.send", "print", "open", "str", "os.path.join", "print", "print", "print", "Exception", "str", "datetime.datetime.now"], "store_vars_calls": {"data": "open().read", "metadata": "metadata_from_gldas_filename", "upload_target": "os.path.join", "folder_exists": "does_object_exist", "req": "Request", "prepped": "req.prepare", "t": "datetime.datetime.now", "resp": "s.send"}}, "last_dcat_gldas_date": {"returns": [["end_date"]], "min_max_lineno": {"min_lineno": 361, "max_lineno": 383}, "calls": ["requests.post", "sync_gldas.handle_api_response", "datetime.datetime.strptime"], "store_vars_calls": {"resp": "requests.post", "parsed_response": "handle_api_response", "end_date": "datetime.datetime.strptime"}}, "get_dataset_variable_ids": {"returns": [["variable_ids"]], "min_max_lineno": {"min_lineno": 386, "max_lineno": 392}, "calls": ["requests.post", "sync_gldas.handle_api_response"], "store_vars_calls": {"resp": "requests.post", "resp_json": "handle_api_response"}}, "generate_resources_definitions": {"args": ["sync_state"], "returns": [["resource_definitions"]], "min_max_lineno": {"min_lineno": 394, "max_lineno": 441}, "calls": ["sync_gldas.get_dataset_variable_ids", "sync_state.items", "sync_gldas.metadata_from_gldas_filename", "resource_definitions.append", "str", "uuid.uuid4"], "store_vars_calls": {"variable_ids": "get_dataset_variable_ids", "metadata": "metadata_from_gldas_filename"}}, "register_resource_batch": {"args": ["resource_definition_batch"], "min_max_lineno": {"min_lineno": 443, "max_lineno": 449}, "calls": ["requests.post", "sync_gldas.handle_api_response"], "store_vars_calls": {"resp": "requests.post"}}, "sync_date": {"args": ["date_str"], "min_max_lineno": {"min_lineno": 456, "max_lineno": 504}, "calls": ["datetime.datetime.now", "print", "datetime.datetime.strptime", "datetime.datetime.strptime.strftime", "datetime.datetime.strptime.strftime", "sync_gldas.list_gldas_files", "sync_gldas.generate_resources_definitions", "print", "sync_gldas.register_resource_batch", "print", "sync_gldas.download_gldas_file", "sync_gldas.upload_file", "upload_file.split", "os.remove", "print", "Exception", "datetime.datetime.now"], "store_vars_calls": {"t": "datetime.datetime.now", "date": "datetime.datetime.strptime", "year": "date.strftime", "day_of_year": "date.strftime", "filenames": "list_gldas_files", "resource_definitions": "generate_resources_definitions", "downloaded_to": "download_gldas_file", "upload_target": "upload_file", "upload_target_parts": "upload_target.split"}}, "main": {"min_max_lineno": {"min_lineno": 507, "max_lineno": 517}, "calls": ["sync_gldas.prepare_env", "sync_gldas.last_available_gldas_date", "sync_gldas.last_dcat_gldas_date", "sync_gldas.generate_list_of_dates_between", "sync_gldas.sync_date"], "store_vars_calls": {"last_gldas_date": "last_available_gldas_date", "last_dcat_date": "last_dcat_gldas_date", "missing_dates": "generate_list_of_dates_between"}}}, "body": {"calls": ["requests.Session"], "store_vars_calls": {"s": "Session"}}, "main_info": {"main_flag": 1, "main_function": "sync_gldas.main", "type": "script"}, "is_test": false}